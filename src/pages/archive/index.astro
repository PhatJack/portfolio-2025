---
import Row from "@/components/about/row.astro";
import Layout from "@/layouts/Layout.astro";
import { archiveData } from "../config";
import TimeLineItem from "@/components/archive/timeLineItem.astro";
import { fade, slide } from "astro:transitions";


---

<Layout title="Achrive">
  <div transition:animate={fade({duration: '0.5s'})} class="w-full h-full p-3 bg-white dark:bg-dark rounded-2xl sm:p-10 overflow-hidden">
    <Row title="Archive" id="archive" href="#archive">
      <div class="w-full h-fit relative flex flex-col space-y-6 overflow-hidden">
        <div 
          class="absolute left-3.5 top-10 w-1 rounded-lg h-full bg-pink-300 dark:bg-pink-800 timeline-line"
          data-aos="fade-up"
          data-aos-duration="1000"
          data-aos-delay="300"
        ></div>
        <div 
          class="w-fit rounded-full py-1 px-2 bg-pink-100 dark:bg-pink-400 flex items-center gap-2 relative z-10 journey-badge"
          data-aos="zoom-in"
          data-aos-duration="600"
          data-aos-delay="200"
        >
          <div class="size-4 rounded-full bg-pink-400 dark:bg-pink-800 animate-pulse"></div>
          <span class="font-semibold">My Journey</span>
        </div>
        <div class="timeline-container">
          {archiveData.map((item, index) => 
            <div 
              class="timeline-item-wrapper"
              data-aos="fade-up"
              data-aos-duration="800"
              data-aos-delay={100 * (index + 1)}
              data-aos-anchor-placement="top-bottom"
            >
              <TimeLineItem {...item} />
            </div>
          )}
        </div>
      </div>
    </Row>
  </div>
</Layout>

<style>
  @keyframes slideInFromLeft {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes fadeInUp {
    0% {
      transform: translateY(30px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes scaleIn {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes drawLine {
    0% {
      height: 0;
    }
    100% {
      height: 100%;
    }
  }

  .timeline-line {
    animation: drawLine 1.5s ease-out forwards;
    animation-delay: 0.5s;
    height: 0;
  }

  .journey-badge {
    animation: scaleIn 0.6s ease-out forwards;
    animation-delay: 0.2s;
    transform: scale(0.8);
    opacity: 0;
  }

  .timeline-item-wrapper {
    transition: all 0.3s ease;
  }

  .timeline-item-wrapper:hover {
    transform: translateX(10px);
  }

  .timeline-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  :global(.timeline-item) {
    transition: all 0.3s ease;
  }

  :global(.timeline-dot) {
    transition: all 0.3s ease;
    position: relative;
  }

  :global(.timeline-dot::after) {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 0;
    height: 0;
    background: rgba(244, 114, 182, 0.3);
    border-radius: 50%;
    transition: all 0.3s ease;
  }

  :global(.timeline-item:hover .timeline-dot::after) {
    width: 24px;
    height: 24px;
  }

  :global(.timeline-connector) {
    transition: all 0.3s ease;
  }

  :global(.timeline-item:hover .timeline-connector) {
    border-color: #f472b6;
    transform: scaleX(1.2);
  }

  :global(.timeline-badge) {
    position: relative;
    overflow: hidden;
  }

  :global(.timeline-badge::before) {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s ease;
  }

  :global(.timeline-badge:hover::before) {
    left: 100%;
  }

  :global(.timeline-card) {
    transform: translateY(0);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  :global(.timeline-card:hover) {
    transform: translateY(-5px);
  }

  :global(.timeline-header) {
    position: relative;
    overflow: hidden;
  }

  :global(.timeline-header::after) {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #f472b6, #ec4899);
    transition: width 0.3s ease;
  }

  :global(.timeline-card:hover .timeline-header::after) {
    width: 100%;
  }

  :global(.timeline-doc-item) {
    transition: all 0.2s ease;
  }

  :global(.timeline-doc-item:hover) {
    background: rgba(244, 114, 182, 0.05);
    border-radius: 4px;
    padding: 2px 4px;
    margin: -2px -4px;
  }

  :global(.timeline-image) {
    position: relative;
    overflow: hidden;
  }

  :global(.timeline-image::after) {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(244, 114, 182, 0.2) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  :global(.timeline-image:hover::after) {
    opacity: 1;
  }

  /* Dark mode adjustments */
  :global(.dark .timeline-doc-item:hover) {
    background: rgba(244, 114, 182, 0.1);
  }

  /* Stagger animation for items */
  :global(.timeline-item-wrapper:nth-child(1)) {
    animation-delay: 0.1s;
  }

  :global(.timeline-item-wrapper:nth-child(2)) {
    animation-delay: 0.2s;
  }

  :global(.timeline-item-wrapper:nth-child(3)) {
    animation-delay: 0.3s;
  }

  :global(.timeline-item-wrapper:nth-child(4)) {
    animation-delay: 0.4s;
  }

  :global(.timeline-item-wrapper:nth-child(5)) {
    animation-delay: 0.5s;
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    :global(.timeline-item-wrapper:hover) {
      transform: translateX(5px);
    }
  }
</style>
